<style>
  .scroll-image-section {
    position: relative;
    width: 100vw;
    height: 100vh;
    margin-left: calc(-50vw + 50%);
    overflow: hidden;
  }

  .scroll-image-container {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    display: flex;
    align-items: flex-start;
    justify-content: center;
    padding: 2rem;
    will-change: transform;
  }

  .scroll-image {
    width: 250px;
  }
</style>

<script>
  function initScrollImageMovement() {
    const section = document.querySelector('.scroll-image-section');
    const container = document.querySelector('.scroll-image-container');

    if (!section || !container) return;

    function updateImagePosition() {
      const rect = section.getBoundingClientRect();
      const sectionHeight = section.offsetHeight;
      const viewportHeight = window.innerHeight;
      const imageHeight = container.offsetHeight;

      // Calculate scroll progress based on the section's position
      // When section.top = 0, progress = 0
      // When section.bottom = viewportHeight, progress = 1
      const maxTranslate = sectionHeight - imageHeight;
      const scrollRange = sectionHeight - imageHeight;
      const scrollProgress = Math.max(0, Math.min(1, -rect.top / scrollRange));

      const translateY = scrollProgress * maxTranslate;

      container.style.transform = `translateY(${translateY}px)`;
    }

    window.addEventListener('scroll', updateImagePosition, { passive: true });
    updateImagePosition(); // Initial position
  }

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initScrollImageMovement);
  } else {
    initScrollImageMovement();
  }
</script>
